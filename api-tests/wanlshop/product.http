### WanlShop 商品接口 API 测试（Product 列表与详情）
### 对应控制器: application/api/controller/wanlshop/Product.php
### 说明：以下为商品列表与详情接口测试用例
### 路由：/api/wanlshop/product/lists 与 /api/wanlshop/product/goods

### ========================================
### 环境变量
### ========================================
@baseUrl = https://grain.griffithres.top
@apiPrefix = /api/wanlshop/product
@goodsId = REPLACE_WITH_EXISTING_GOODS_ID

### ========================================
### 1. 获取所有商品列表（默认分页）
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists
Content-Type: application/json

### ========================================
### 2. 按 shop_id=1 筛选商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?shop_id=1
Content-Type: application/json

### ========================================
### 2.1 按地区筛选商品（region_city_code）
###     说明：编码参考 public/assets/js/common/region-data.js（6位地级市代码）
###     示例：南京市 320100；为空时不过滤
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?region_city_code=320100
Content-Type: application/json

### ========================================
### 3. 按 shop_id 查询不存在的店铺（应返回空列表或相应提示）
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?shop_id=999999
Content-Type: application/json

### ========================================
### 4. 通过操作符后缀语法进行过滤（示例：精确匹配）
###    支持复合过滤：如再加 brand_id、category_id、status 等
### ========================================
###    示例A：按 shop_id 精确匹配
GET {{baseUrl}}{{apiPrefix}}/lists?shop_id__eq=1
Content-Type: application/json

###    示例B：按 flag=recommend 过滤
GET {{baseUrl}}{{apiPrefix}}/lists?flag__eq=recommend
Content-Type: application/json

###    复合条件（注释示例）：?shop_id__eq=1&flag__eq=recommend

### ========================================
### 5. 筛选推荐商品（flag=recommend）
###    获取 grain_wanlshop_goods 表中 flag 字段为 recommend 的商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?flag__eq=recommend
Content-Type: application/json

### ========================================
### 6. 获取商品详情（需要传入商品 ID）
###    将 {{goodsId}} 替换为实际存在的商品 ID
### ========================================
GET {{baseUrl}}{{apiPrefix}}/goods?id=1
Content-Type: application/json

### ========================================
### 7. 获取不存在的商品（测试错误处理）
### ========================================
GET {{baseUrl}}{{apiPrefix}}/goods?id=999999
Content-Type: application/json

### ========================================
### 8. 按单个分类筛选商品（category_id=1）
###    功能：只返回分类ID为 1 的分类及其商品；若 1 为父分类，将自动包含其所有子分类的商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?category_id=106
Content-Type: application/json

### ========================================
### 9. 按父分类筛选（自动包含所有子分类商品）
###    说明：当传入父级类目ID时，后台会递归匹配该父类目下所有子类目的商品
###    示例：假设 ID=1 为顶级/父分类，则会包含其所有子类目商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?category_id=1
Content-Type: application/json

### ========================================
### 10. 按多个分类筛选（category_id=1,2）
###     说明：多个分类ID使用英文逗号分隔；将返回属于任一指定分类（及其子分类）的商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?category_id=1,2
Content-Type: application/json

### ========================================
### 11. 与其他筛选条件组合（category_id=1 & shop_id=1）
###     说明：在分类筛选基础上叠加店铺筛选；常用于店铺内按类目查看商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?category_id=1&shop_id=1
Content-Type: application/json

### ========================================
### 12. 按商品名称快速搜索（search 参数）
###     说明：使用 search 参数会在 title 和 category.name 字段中进行模糊搜索
###     示例：搜索商品名称包含"大米"的商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?search=大米
Content-Type: application/json

### ========================================
### 13. 按商品名称精确模糊搜索（title__like 操作符）
###     说明：使用 title__like 后缀仅在 title 字段中进行模糊搜索
###     示例：搜索商品标题包含"有机"的商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?title__like=推荐
Content-Type: application/json

### ========================================
### 14. 组合搜索：按名称搜索+店铺筛选
###     说明：在特定店铺内搜索包含关键词的商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?search=大米&shop_id=1
Content-Type: application/json

### ========================================
### 15. 组合搜索：按名称搜索+分类筛选
###     说明：在特定分类下搜索包含关键词的商品
### ========================================
GET {{baseUrl}}{{apiPrefix}}/lists?title__like=有机&category_id=106
Content-Type: application/json
